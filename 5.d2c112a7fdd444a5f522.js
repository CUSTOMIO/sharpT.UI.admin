(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Pmxt:function(t,e,i){"use strict";i.r(e),i.d(e,"ExaminationDetailModule",function(){return ot});var n=i("ofXK"),a=i("PCNd"),o=i("tyNb"),c=i("M9IT"),r=i("+0xr"),d=i("3Pt+"),b=i("0IaG"),s=i("fXoL"),l=i("RiFG"),m=i("AytR"),u=i("lJxs"),p=i("rW8v"),f=i("tk/3");let g=(()=>{class t{constructor(t){this.http=t}academicYear(){return this.http.get(`${m.a.api_endpoint}/academicYear`).pipe(Object(u.a)(t=>t.map(t=>new p.a(t))))}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(f.b))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=i("NFeN"),x=i("f0Cb"),D=i("bv9b"),O=i("xHqg"),C=i("bTqV"),v=i("XiUz"),T=i("kmnG"),U=i("d3UM"),P=i("qFsG"),S=i("iadO"),I=i("FKr1"),w=i("Xa2L");function M(t,e){1&t&&s.Pb(0,"mat-progress-bar",5)}function L(t,e){1&t&&s.Cc(0,"Examination Detail")}function j(t,e){if(1&t&&s.Pb(0,"mat-option",27),2&t){const t=e.$implicit;s.lc("value",t.id)("innerHTML",t.name,s.vc)}}function F(t,e){if(1&t&&s.Pb(0,"mat-option",27),2&t){const t=e.$implicit;s.lc("value",t.id)("innerHTML",t.name,s.vc)}}function _(t,e){if(1&t&&s.Pb(0,"mat-option",27),2&t){const t=e.$implicit;s.lc("value",t.id)("innerHTML",t.startYear+"-"+t.endYear,s.vc)}}function k(t,e){if(1&t){const t=s.Vb();s.Ub(0,"form",12),s.Ub(1,"div",13),s.Ub(2,"div",14),s.Ub(3,"mat-label"),s.Cc(4,"Examination Name : "),s.Tb(),s.Tb(),s.Ub(5,"div",15),s.Ub(6,"mat-form-field",16),s.Ub(7,"mat-select",17),s.Bc(8,j,1,2,"mat-option",18),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(9,"div",13),s.Ub(10,"div",14),s.Ub(11,"mat-label"),s.Cc(12,"Standard : "),s.Tb(),s.Tb(),s.Ub(13,"div",15),s.Ub(14,"mat-form-field",16),s.Ub(15,"mat-select",19),s.cc("selectionChange",function(e){return s.uc(t),s.gc(2).getSubjects(e.value)}),s.Bc(16,F,1,2,"mat-option",18),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(17,"div",13),s.Ub(18,"div",14),s.Ub(19,"mat-label"),s.Cc(20,"Academic Year : "),s.Tb(),s.Tb(),s.Ub(21,"div",15),s.Ub(22,"mat-form-field",16),s.Ub(23,"mat-select",20),s.Bc(24,_,1,2,"mat-option",18),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(25,"div",13),s.Ub(26,"div",14),s.Ub(27,"mat-label"),s.Cc(28,"Start On : "),s.Tb(),s.Tb(),s.Ub(29,"div",15),s.Ub(30,"mat-form-field",21),s.Pb(31,"input",22),s.Pb(32,"mat-datepicker-toggle",23),s.Pb(33,"mat-datepicker",null,24),s.Tb(),s.Tb(),s.Tb(),s.Ub(35,"div",13),s.Ub(36,"div",14),s.Ub(37,"mat-label"),s.Cc(38,"End On : "),s.Tb(),s.Tb(),s.Ub(39,"div",15),s.Ub(40,"mat-form-field",21),s.Pb(41,"input",25),s.Pb(42,"mat-datepicker-toggle",23),s.Pb(43,"mat-datepicker",null,26),s.Tb(),s.Tb(),s.Tb(),s.Tb()}if(2&t){const t=s.sc(34),e=s.sc(44),i=s.gc(2);s.lc("formGroup",i.editForm),s.Db(8),s.lc("ngForOf",i.examination),s.Db(8),s.lc("ngForOf",i.standard),s.Db(8),s.lc("ngForOf",i.academicYear),s.Db(7),s.lc("matDatepicker",t),s.Db(1),s.lc("for",t),s.Db(9),s.lc("matDatepicker",e),s.Db(1),s.lc("for",e)}}function B(t,e){1&t&&s.Cc(0,"Subject Detail")}function y(t,e){if(1&t&&(s.Ub(0,"div"),s.Ub(1,"div",31),s.Ub(2,"mat-form-field",32),s.Ub(3,"mat-label"),s.Cc(4,"Subject"),s.Tb(),s.Pb(5,"input",33),s.Tb(),s.Ub(6,"mat-form-field",34),s.Ub(7,"mat-label"),s.Cc(8,"Out Of"),s.Tb(),s.Pb(9,"input",35),s.Tb(),s.Tb(),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.lc("formGroup",t)}}function E(t,e){if(1&t){const t=s.Vb();s.Ub(0,"button",36),s.cc("click",function(){return s.uc(t),s.gc(3).onSubmit()}),s.Cc(1),s.Tb()}if(2&t){const t=s.gc(3);s.lc("disabled",!t.editForm.valid||t.editForm.untouched),s.Db(1),s.Ec(" ","edit"===t.data.mode?"Update":"Add"," ")}}function N(t,e){if(1&t&&(s.Ub(0,"form",28),s.Bc(1,y,10,1,"div",29),s.Bc(2,E,2,2,"button",30),s.Tb()),2&t){const t=s.gc(2);s.lc("formGroup",t.editForm),s.Db(1),s.lc("ngForOf",t.t.controls),s.Db(1),s.lc("ngIf",!t.spinnerLoading&&!t.subjectDetailLoading)}}function R(t,e){1&t&&s.Pb(0,"mat-spinner",37),2&t&&s.lc("diameter",40)}function Y(t,e){if(1&t&&(s.Ub(0,"mat-horizontal-stepper"),s.Ub(1,"mat-step"),s.Bc(2,L,1,0,"ng-template",6),s.Ub(3,"div",7),s.Bc(4,k,45,8,"form",8),s.Ub(5,"div"),s.Ub(6,"button",9),s.Cc(7,"Next"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(8,"mat-step"),s.Bc(9,B,1,0,"ng-template",6),s.Bc(10,N,3,3,"form",10),s.Bc(11,R,1,1,"mat-spinner",11),s.Tb(),s.Tb()),2&t){const t=s.gc();s.Db(4),s.lc("ngIf",t.data.examinationDetail),s.Db(6),s.lc("ngIf",!t.subjectDetailLoading),s.Db(1),s.lc("ngIf",t.subjectDetailLoading||t.spinnerLoading)}}let G=(()=>{class t{constructor(t,e,i,n,a,o,c,r,b){this.data=t,this.dialogRef=e,this.formBuilder=i,this.standardService=n,this.examinationService=a,this.examinationDetailService=o,this.examinationSubjectDetailService=c,this.academicYearService=r,this.subjectService=b,this.isLoading=!0,this.spinnerLoading=!1,this.subjectDetailLoading=!0,this.editForm=i.group({examinationId:[,[d.t.required]],standardId:[,[d.t.required]],academicYearId:[,[d.t.required]],startOn:[,[d.t.required]],endOn:[,[d.t.required]],data:new d.d([],d.t.required)}),"edit"===t.mode&&(this.getSubjects(t.examinationDetail.standardId),this.startOn=new Date(t.examinationDetail.startOn),this.endOn=new Date(t.examinationDetail.endOn),this.editForm.get("standardId").setValue(t.examinationDetail.standardId),this.editForm.get("startOn").setValue(this.startOn),this.editForm.get("endOn").setValue(this.endOn),this.editForm.get("examinationId").setValue(t.examinationDetail.examinationId),this.editForm.get("academicYearId").setValue(t.examinationDetail.academicYearId))}get t(){return this.editForm.controls.data}ngOnInit(){this.standardService.getStandard().subscribe(t=>{this.standard=t}),this.examinationService.examination().subscribe(t=>{this.examination=t}),this.academicYearService.academicYear().subscribe(t=>{this.academicYear=t}),this.isLoading=!1}getSubjects(t){this.editForm.controls.data.value&&this.t.clear(),this.subjectService.getSubjectByStandardId(t).subscribe(t=>{this.subjects=t;for(let e of this.subjects.data)this.t.push(this.formBuilder.group({subjectId:[e.id,[d.t.required]],subjectName:[e.name,[d.t.required]],outOf:["",[d.t.required]]}));"edit"===this.data.mode?this.getExaminationSubjectDetail(this.data.examinationDetail.id):this.subjectDetailLoading=!1})}getExaminationSubjectDetail(t){this.examinationSubjectDetailService.getExaminationSubjectDetail(t).subscribe(t=>{t.forEach(t=>{this.subjects.data.forEach(e=>{if(t.subjectId==e.id){const e=this.t.value.findIndex((e,i)=>e.subjectId===t.subjectId);this.t.at(e).patchValue({outOf:t.outOf})}})}),this.subjectDetailLoading=!1})}onSubmit(){if(!this.editForm.valid)return;this.spinnerLoading=!0;const t={next:t=>{console.log(t),t.message&&this.dialogRef.close({data:t.message}),this.spinnerLoading=!1},error:t=>{console.error(t),this.spinnerLoading=!1}};"edit"===this.data.mode?this.examinationDetailService.postEditExaminationDetail(this.editForm.value,this.data.examinationDetail.id).subscribe(t):"new"===this.data.mode&&this.examinationDetailService.postAddExaminationDetail(this.editForm.value).subscribe(t)}closeDialog(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(b.a),s.Ob(b.d),s.Ob(d.e),s.Ob(l.g),s.Ob(l.d),s.Ob(l.c),s.Ob(l.e),s.Ob(g),s.Ob(l.h))},t.\u0275cmp=s.Ib({type:t,selectors:[["ng-component"]],decls:8,vars:2,consts:[[1,"header"],[1,"mat-subheading-2"],[3,"click"],["mode","indeterminate",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],["matStepLabel",""],[1,"container"],["class","pt-20",3,"formGroup",4,"ngIf"],["mat-button","","matStepperNext",""],[3,"formGroup",4,"ngIf"],[3,"diameter",4,"ngIf"],[1,"pt-20",3,"formGroup"],[1,"wrapper"],["fxFlex","35",1,"label"],["fxFlex","65",1,"input"],["appearance","standard"],["formControlName","examinationId"],[3,"value","innerHTML",4,"ngFor","ngForOf"],["formControlName","standardId",3,"selectionChange"],["formControlName","academicYearId"],["appearance","fill",1,"date"],["matInput","","formControlName","startOn",3,"matDatepicker"],["matSuffix","",3,"for"],["startOn",""],["matInput","","formControlName","endOn",3,"matDatepicker"],["endOn",""],[3,"value","innerHTML"],[3,"formGroup"],[4,"ngFor","ngForOf"],["type","submit","mat-flat-button","","color","accent",3,"disabled","click",4,"ngIf"],["align","center",3,"formGroup"],["appearance","legacy",1,"mr-10"],["matInput","","formControlName","subjectName","readonly",""],["appearance","standard",1,"ml-10"],["type","number","matInput","","formControlName","outOf"],["type","submit","mat-flat-button","","color","accent",3,"disabled","click"],[3,"diameter"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"h1",1),s.Cc(2,"Examination Detail"),s.Tb(),s.Ub(3,"mat-icon",2),s.cc("click",function(){return e.closeDialog()}),s.Cc(4,"close"),s.Tb(),s.Tb(),s.Pb(5,"mat-divider"),s.Bc(6,M,1,0,"mat-progress-bar",3),s.Bc(7,Y,12,3,"mat-horizontal-stepper",4)),2&t&&(s.Db(6),s.lc("ngIf",e.isLoading),s.Db(1),s.lc("ngIf",!e.isLoading))},directives:[h.a,x.a,n.k,D.a,O.a,O.b,O.c,C.a,O.e,d.u,d.o,d.g,v.b,T.e,T.b,U.a,d.n,d.f,n.j,P.b,d.c,S.e,S.h,T.f,S.d,I.n,d.r,w.b],styles:[".header[_ngcontent-%COMP%]{margin-bottom:10px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{float:left;margin-bottom:0}.header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:0;cursor:pointer}.container[_ngcontent-%COMP%]{margin:0 auto 25px;width:100%}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{height:50px;align-items:center}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-align:right;padding-top:16px;margin-right:20px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:180px}button[_ngcontent-%COMP%]{display:block;margin:10px auto 0}"]}),t})();function q(t,e){1&t&&s.Pb(0,"mat-progress-bar",21)}function z(t,e){1&t&&(s.Ub(0,"th",22),s.Cc(1," Name "),s.Tb())}function $(t,e){if(1&t&&(s.Ub(0,"td",23),s.Cc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.Ec(" ",t.examinationName," ")}}function A(t,e){1&t&&(s.Ub(0,"th",22),s.Cc(1," Standard "),s.Tb())}function V(t,e){if(1&t&&(s.Ub(0,"td",23),s.Cc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.Ec(" ",t.standardName," ")}}function H(t,e){1&t&&(s.Ub(0,"th",22),s.Cc(1," Start On "),s.Tb())}function X(t,e){if(1&t&&(s.Ub(0,"td",23),s.Cc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.Ec(" ",t.startOn," ")}}function J(t,e){1&t&&(s.Ub(0,"th",22),s.Cc(1," End On "),s.Tb())}function K(t,e){if(1&t&&(s.Ub(0,"td",23),s.Cc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.Ec(" ",t.endOn," ")}}function Q(t,e){1&t&&(s.Ub(0,"th",22),s.Cc(1," Updated At "),s.Tb())}function W(t,e){if(1&t&&(s.Ub(0,"td",23),s.Cc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.Ec(" ",t.updatedAt," ")}}function Z(t,e){1&t&&s.Pb(0,"th",22)}function tt(t,e){if(1&t){const t=s.Vb();s.Ub(0,"td",23),s.Ub(1,"i",24),s.cc("click",function(){s.uc(t);const i=e.$implicit;return s.gc().openDialog(i,"edit")}),s.Tb(),s.Tb()}}function et(t,e){1&t&&s.Pb(0,"tr",25)}function it(t,e){1&t&&s.Pb(0,"tr",26)}const nt=[{path:"",component:(()=>{class t{constructor(t,e){this.examinationDetailService=t,this.dialog=e,this.displayedColumns=["name","standard","startOn","endOn","updatedAt","edit"],this.examinationDetailPerPage=20,this.pageSizeOptions=[20,50,100],this.pageIndex=1,this.isLoading=!0,this.observer={next:t=>{this.dataSource=new r.k(t),t.forEach(t=>{t.startOn=new Date(t.startOn).toDateString(),t.endOn=new Date(t.endOn).toDateString(),t.updatedAt=new Date(t.updatedAt).toDateString()}),this.isLoading=!1},error:t=>console.error("Observer got an error: "+t)}}ngOnInit(){this.examinationDetailService.getExaminationDetail(this.examinationDetailPerPage,1).subscribe(this.observer)}onChangedPage(t){this.isLoading=!0,this.examinationDetailService.getExaminationDetail(t.pageSize,t.pageIndex+1).subscribe(this.observer),this.pageIndex=t.pageIndex+1}applyFilter(t){this.isLoading=!0,this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage(),this.isLoading=!1}openDialog(t,e){this.dialog.open(G,{disableClose:!0,width:"550px",data:{examinationDetail:t,mode:e}}).afterClosed().subscribe(t=>{t&&(this.examinationDetailService.getExaminationDetail(this.examinationDetailPerPage,this.pageIndex).subscribe(this.observer),this.count+=1)})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(l.c),s.Ob(b.b))},t.\u0275cmp=s.Ib({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&s.Gc(c.a,1),2&t){let t;s.rc(t=s.dc())&&(e.paginator=t.first)}},decls:35,vars:7,consts:[["mode","indeterminate",4,"ngIf"],[1,"container"],[1,"filter-div"],["appearance","standard",1,"filter-input"],["matInput","","placeholder","filterlist...",3,"keyup"],["input",""],[1,"add-icon"],["mat-flat-button","","color","primary",3,"click"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","standard"],["matColumnDef","startOn"],["matColumnDef","endOn"],["matColumnDef","updatedAt"],["matColumnDef","edit"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSizeOptions","pageSize","page"],["mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],[1,"far","fa-edit","text-dark",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(s.Bc(0,q,1,0,"mat-progress-bar",0),s.Ub(1,"div",1),s.Ub(2,"div",2),s.Ub(3,"div"),s.Ub(4,"mat-form-field",3),s.Ub(5,"mat-label"),s.Cc(6,"Filter"),s.Tb(),s.Ub(7,"input",4,5),s.cc("keyup",function(t){return e.applyFilter(t)}),s.Tb(),s.Tb(),s.Tb(),s.Ub(9,"div",6),s.Ub(10,"button",7),s.cc("click",function(){return e.openDialog({},"new")}),s.Cc(11,"New"),s.Tb(),s.Tb(),s.Tb(),s.Ub(12,"div",8),s.Ub(13,"table",9),s.Sb(14,10),s.Bc(15,z,2,0,"th",11),s.Bc(16,$,2,1,"td",12),s.Rb(),s.Sb(17,13),s.Bc(18,A,2,0,"th",11),s.Bc(19,V,2,1,"td",12),s.Rb(),s.Sb(20,14),s.Bc(21,H,2,0,"th",11),s.Bc(22,X,2,1,"td",12),s.Rb(),s.Sb(23,15),s.Bc(24,J,2,0,"th",11),s.Bc(25,K,2,1,"td",12),s.Rb(),s.Sb(26,16),s.Bc(27,Q,2,0,"th",11),s.Bc(28,W,2,1,"td",12),s.Rb(),s.Sb(29,17),s.Bc(30,Z,1,0,"th",11),s.Bc(31,tt,2,0,"td",12),s.Rb(),s.Bc(32,et,1,0,"tr",18),s.Bc(33,it,1,0,"tr",19),s.Tb(),s.Ub(34,"mat-paginator",20),s.cc("page",function(t){return e.onChangedPage(t)}),s.Tb(),s.Tb(),s.Tb()),2&t&&(s.lc("ngIf",e.isLoading),s.Db(13),s.lc("dataSource",e.dataSource),s.Db(19),s.lc("matHeaderRowDef",e.displayedColumns),s.Db(1),s.lc("matRowDefColumns",e.displayedColumns),s.Db(1),s.lc("length",e.count)("pageSizeOptions",e.pageSizeOptions)("pageSize",e.examinationDetailPerPage))},directives:[n.k,T.b,T.e,P.b,C.a,r.j,r.c,r.e,r.b,r.g,r.i,c.a,D.a,r.d,r.a,r.f,r.h],styles:[".filter-div[_ngcontent-%COMP%]{width:100%;height:80px;display:inline-block;padding:5px 0;border-radius:20px 20px 0 0;background-color:#a2d6f91a;box-shadow:0 5px 5px -3px #0000001a,0 8px 10px 1px #00000012,0 3px 14px 2px #0000000f}.filter-div[_ngcontent-%COMP%]   .filter-input[_ngcontent-%COMP%]{margin-left:20px;float:left;max-width:300px}.filter-div[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{margin:25px 20px 0 0;float:right}.container[_ngcontent-%COMP%]{width:95%;margin:50px auto 100px}.container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:20%}"]}),t})()}];let at=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({imports:[[o.f.forChild(nt)],o.f]}),t})(),ot=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({providers:[],imports:[[n.c,a.a,at]]}),t})()}}]);