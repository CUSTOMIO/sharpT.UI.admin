(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"7UCR":function(t,e,i){"use strict";i.r(e),i.d(e,"UserModule",function(){return vt});var n=i("ofXK"),a=i("PCNd"),r=i("tyNb"),s=i("fXoL"),c=i("2Vo4"),o=i("RiFG");let d=(()=>{class t{constructor(t){this.userService=t,this.userName=new c.a(null),this.userImage=new c.a(null),this.userAddress=new c.a(null),this.userPN=new c.a(null),this.userPPN=new c.a(null),this.userSchool=new c.a(null),this.userEnrollDate=new c.a(null),this.userStandard=new c.a(null),this.userSubject=new c.a(null),this.userEmail=new c.a(null),this.userStandardId=new c.a(null),this.userStatus=new c.a(null)}getUser(t){this.userService.getUserName(t).subscribe(t=>{this.userName.next(t)}),this.userService.getUserImage(t).subscribe(t=>{this.userImage.next(t.image)}),this.userService.getUserAddress(t).subscribe(t=>{this.userAddress.next(t.address)}),this.userService.getUserPN(t).subscribe(t=>{this.userPN.next(t.studentPN)}),this.userService.getUserPPN(t).subscribe(t=>{this.userPPN.next(t.parentPN)}),this.userService.getUserEnrollDate(t).subscribe(t=>{this.userEnrollDate.next(t)}),this.userService.getUserStandard(t).subscribe(t=>{this.userStandard.next(t)}),this.userService.getUserSubject(t).subscribe(t=>{this.userSubject.next(t)}),this.userService.getUserEmail(t).subscribe(t=>{this.userEmail.next(t.email)}),this.userService.getUserStatus(t).subscribe(t=>{this.userStatus.next(t.status)})}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(o.j))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac}),t})();var l=i("AytR"),b=i("3Pt+"),u=i("0IaG"),m=i("NFeN"),g=i("f0Cb"),h=i("bTqV");function f(t,e){if(1&t&&(s.Ub(0,"div"),s.Pb(1,"img",8),s.Tb()),2&t){const t=s.gc();s.Db(1),s.lc("src",t.imageURL,s.wc)}}let p=(()=>{class t{constructor(t,e,i,n){this.data=t,this.dialogRef=e,this.formBuilder=i,this.userService=n}ngOnInit(){this.imageForm=this.formBuilder.group({image:[,b.t.required],userId:[,[b.t.required]]})}showPreview(t){if(t.target.files[0]){const e=t.target.files[0];if(!e.type.match(/image-*/))return void alert("Invalid format");this.imageForm.get("image").setValue(e),this.imageForm.get("image").updateValueAndValidity();const i=new FileReader;i.onload=()=>{this.imageURL=i.result},i.readAsDataURL(e)}}closeDialog(){this.dialogRef.close()}updateImage(){const t=new FormData;t.append("image",this.imageForm.controls.image.value),t.append("userId",this.data.userId),t.append("oldImageUrl",this.data.imageUrl),this.userService.postUserImage(t).subscribe(t=>{console.log(t),t.message&&this.closeDialog()})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(u.a),s.Ob(u.d),s.Ob(b.e),s.Ob(o.j))},t.\u0275cmp=s.Ib({type:t,selectors:[["ng-component"]],decls:13,vars:1,consts:[[1,"header"],[1,"mat-subheading-2"],[3,"click"],[4,"ngIf"],["hidden","","type","file","accept","image/*",3,"change"],["fileInput",""],["type","button","mat-raised-button","","color","accent",3,"click"],["id","button","mat-raised-button","","color","primary",3,"click"],["height","120","width","90",3,"src"]],template:function(t,e){if(1&t){const t=s.Vb();s.Ub(0,"div",0),s.Ub(1,"h1",1),s.Cc(2,"Edit Image"),s.Tb(),s.Ub(3,"mat-icon",2),s.cc("click",function(){return e.closeDialog()}),s.Cc(4,"close"),s.Tb(),s.Tb(),s.Pb(5,"mat-divider"),s.Bc(6,f,2,1,"div",3),s.Ub(7,"input",4,5),s.cc("change",function(t){return e.showPreview(t)}),s.Tb(),s.Ub(9,"button",6),s.cc("click",function(){return s.uc(t),s.sc(8).click()}),s.Cc(10,"Choose File"),s.Tb(),s.Ub(11,"button",7),s.cc("click",function(){return e.updateImage()}),s.Cc(12,"Upload"),s.Tb()}2&t&&(s.Db(6),s.lc("ngIf",e.imageURL))},directives:[m.a,g.a,n.k,h.a],styles:[".header[_ngcontent-%COMP%]{margin-bottom:10px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{float:left}.header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:0;cursor:pointer}#button[_ngcontent-%COMP%]{display:block;margin:0 auto}"]}),t})();var v=i("znSr"),C=i("Xa2L"),P=i("XiUz");function U(t,e){1&t&&s.Pb(0,"mat-spinner",4),2&t&&s.lc("diameter",40)}function S(t,e){1&t&&s.Pb(0,"i",24)}function x(t,e){if(1&t){const t=s.Vb();s.Ub(0,"button",25),s.cc("click",function(){return s.uc(t),s.gc(2).verifyUser()}),s.Cc(1," Verify "),s.Tb()}}function O(t,e){if(1&t){const t=s.Vb();s.Ub(0,"div",5),s.Ub(1,"div",6),s.Ub(2,"i",7),s.cc("click",function(){return s.uc(t),s.gc().openDialog()}),s.Tb(),s.Pb(3,"img",8),s.Tb(),s.Ub(4,"div",9),s.Ub(5,"div",10),s.Ub(6,"div",11),s.Ub(7,"p",12),s.Cc(8),s.Tb(),s.Ub(9,"div",13),s.Bc(10,S,1,0,"i",14),s.Bc(11,x,2,0,"button",15),s.Tb(),s.Tb(),s.Ub(12,"div",16),s.Ub(13,"div",17),s.Ub(14,"div",18),s.Ub(15,"p",19),s.Pb(16,"i",20),s.Cc(17),s.Tb(),s.Ub(18,"p",19),s.Pb(19,"i",21),s.Cc(20),s.Tb(),s.Tb(),s.Ub(21,"div",22),s.Ub(22,"p",19),s.Pb(23,"i",23),s.Cc(24),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()}if(2&t){const t=s.gc();s.Db(3),s.mc("src",t.apiEndpoint+t.imageUrl,s.wc),s.Db(5),s.Ec(" ",t.firstName+" "+t.middleName," "),s.Db(2),s.lc("ngIf",t.userStatus),s.Db(1),s.lc("ngIf",!t.userStatus),s.Db(6),s.Ec(" ",t.email," "),s.Db(3),s.Ec(" ",t.studentPN," "),s.Db(4),s.Ec(" ",t.address," ")}}let T=(()=>{class t{constructor(t,e,i,n){this.userDetailService=t,this.userService=e,this.dialog=i,this.route=n,this.apiEndpoint=l.a.api_endpoint,this.isLoading=!0}ngOnInit(){this.userId=Number(this.route.snapshot.paramMap.get("id")),this.userDetailService.userStatus.subscribe(t=>{this.userStatus=t}),this.userDetailService.userImage.subscribe(t=>{this.imageUrl=t}),this.userDetailService.userName.subscribe(t=>{t&&(this.firstName=t.firstName,this.middleName=t.middleName)}),this.userDetailService.userEmail.subscribe(t=>{t&&(this.email=t)}),this.userDetailService.userPN.subscribe(t=>{t&&(this.studentPN=t)}),this.userDetailService.userAddress.subscribe(t=>{t&&(this.address=t),this.isLoading=!1})}verifyUser(){confirm("Are you sure, you want to verify "+this.firstName+" "+this.middleName)&&this.userService.postVerifyUser(this.userId).subscribe(t=>{console.log(t)})}openDialog(){this.dialog.open(p,{width:"450px",data:{userId:this.userId,imageUrl:this.imageUrl}})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(d),s.Ob(o.j),s.Ob(u.b),s.Ob(r.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-user-detail-header"]],decls:4,vars:3,consts:[[1,"top-span"],[1,"top",3,"ngClass"],[3,"diameter",4,"ngIf"],["class","header","fxLayout","row","fxLayout.sm","row","fxLayout.xs","column","fxLayoutFap","10px",4,"ngIf"],[3,"diameter"],["fxLayout","row","fxLayout.sm","row","fxLayout.xs","column","fxLayoutFap","10px",1,"header"],["fxFlex","18","fxFlex.sm","25","fxFlex.xs","100",1,"img-div","m-auto"],[1,"far","fa-edit","edit-icon","fa-lg",3,"click"],["height","240","width","180",3,"src"],["fxFlex","70","fxFlex.sm","75","fxFlex.xs","100",1,"header-content-1","mat-subheading-2"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutFap","10px"],["fxFlex","100",1,"w-full"],[1,"mat-display-1","user-name"],[1,"user-status"],["class","fas fa-md fa-check text-success",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["fxFlex","80",2,"width","100%"],["fXLayout","row","fxLayout.sm","row","fxLayout.xs","column"],["fxFlex","100","fxFlex.xs","100"],[1,"mat-subheading-2"],[1,"fas","fa-envelope","fa-md"],[1,"fas","fa-phone-alt","fa-md"],["fxFlex","50","fxFlex.xs","100"],[1,"fas","fa-map-marker-alt","fa-md"],[1,"fas","fa-md","fa-check","text-success"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Bc(2,U,1,1,"mat-spinner",2),s.Bc(3,O,25,7,"div",3),s.Tb(),s.Tb()),2&t&&(s.Db(1),s.lc("ngClass",e.userStatus?"verified":"unverified"),s.Db(1),s.lc("ngIf",e.isLoading),s.Db(1),s.lc("ngIf",!e.isLoading))},directives:[n.i,v.a,n.k,C.b,P.d,P.b,P.c,h.a],styles:[".top[_ngcontent-%COMP%]{position:absolute;top:0;width:100%;height:250px;box-shadow:0 1px 3px 0 #0000001a,0 1px 2px 0 #0000000f}.verified[_ngcontent-%COMP%]{background-color:#a2d6f940}.unverified[_ngcontent-%COMP%]{background-color:#f9a2a240}.top-span[_ngcontent-%COMP%]{height:350px!important;width:100%}.header[_ngcontent-%COMP%]{margin-top:75px;width:100%;padding:0 100px}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{aspect-ratio:4/3;display:block;object-fit:cover;border-radius:10px;border:3px solid #fff}.header[_ngcontent-%COMP%]   .header-content-1[_ngcontent-%COMP%]   .w-full[_ngcontent-%COMP%]{display:inline;overflow:auto;white-space:nowrap}.header[_ngcontent-%COMP%]   .header-content-1[_ngcontent-%COMP%]   .w-full[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{float:left}.header[_ngcontent-%COMP%]   .header-content-1[_ngcontent-%COMP%]   .w-full[_ngcontent-%COMP%]   .user-status[_ngcontent-%COMP%]{float:right;line-height:50px;vertical-align:middle;margin-left:10px}.header[_ngcontent-%COMP%]   .header-content-1[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-content-2[_ngcontent-%COMP%]{margin:15px 15px 0 25px}.header[_ngcontent-%COMP%]   .header-content-1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-content-2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0!important;padding:5px 0}.header[_ngcontent-%COMP%]   .img-div[_ngcontent-%COMP%]{position:relative;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.header[_ngcontent-%COMP%]   .img-div[_ngcontent-%COMP%]   .edit-icon[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-15px;color:#4d4f52}.header[_ngcontent-%COMP%]   .img-div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin-left:auto}.header[_ngcontent-%COMP%]   .img-div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer}@media only screen and (max-width:960px){.header[_ngcontent-%COMP%]{padding:0 25px}}@media only screen and (max-width:600px){.top[_ngcontent-%COMP%]{height:200px}.header[_ngcontent-%COMP%]{margin-top:55px;width:100%;padding:0;text-align:center}.img-div[_ngcontent-%COMP%]{position:relative;margin:0 auto}.img-div[_ngcontent-%COMP%], .img-div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:160px}.img-div[_ngcontent-%COMP%]   .edit-icon[_ngcontent-%COMP%]{top:0;right:-5px;cursor:pointer}.m-auto[_ngcontent-%COMP%]{text-align:center}.w-full[_ngcontent-%COMP%]{width:100%}}"]}),t})();var w=i("wZkO"),M=i("kmnG"),I=i("qFsG");function _(t,e){1&t&&s.Pb(0,"mat-spinner",3),2&t&&s.lc("diameter",40)}function D(t,e){1&t&&(s.Ub(0,"div"),s.Cc(1,"Please enter valid data"),s.Tb())}function N(t,e){if(1&t&&(s.Ub(0,"button",17),s.Cc(1," Update "),s.Tb()),2&t){const t=s.gc(2);s.lc("disabled",t.detailForm.invalid)}}function F(t,e){1&t&&s.Pb(0,"mat-spinner",3),2&t&&s.lc("diameter",40)}function y(t,e){if(1&t){const t=s.Vb();s.Ub(0,"form",4),s.cc("ngSubmit",function(){return s.uc(t),s.gc().onSubmit()}),s.Ub(1,"div",5),s.Ub(2,"div",6),s.Ub(3,"mat-label"),s.Cc(4,"First Name : "),s.Tb(),s.Tb(),s.Ub(5,"div",7),s.Ub(6,"mat-form-field",8),s.Pb(7,"input",9),s.Tb(),s.Tb(),s.Tb(),s.Ub(8,"div",5),s.Ub(9,"div",6),s.Ub(10,"mat-label"),s.Cc(11,"Middle Name : "),s.Tb(),s.Tb(),s.Ub(12,"div",7),s.Ub(13,"mat-form-field",8),s.Pb(14,"input",10),s.Tb(),s.Tb(),s.Tb(),s.Ub(15,"div",5),s.Ub(16,"div",6),s.Ub(17,"mat-label"),s.Cc(18,"Last Name : "),s.Tb(),s.Tb(),s.Ub(19,"div",7),s.Ub(20,"mat-form-field",8),s.Pb(21,"input",11),s.Tb(),s.Tb(),s.Tb(),s.Ub(22,"div",5),s.Ub(23,"div",6),s.Ub(24,"mat-label"),s.Cc(25,"Student Number : "),s.Tb(),s.Tb(),s.Ub(26,"div",7),s.Ub(27,"mat-form-field",8),s.Pb(28,"input",12),s.Tb(),s.Tb(),s.Tb(),s.Ub(29,"div",5),s.Ub(30,"div",6),s.Ub(31,"mat-label"),s.Cc(32,"Parent Number : "),s.Tb(),s.Tb(),s.Ub(33,"div",7),s.Ub(34,"mat-form-field",8),s.Pb(35,"input",13),s.Tb(),s.Tb(),s.Tb(),s.Ub(36,"div",5),s.Ub(37,"div",6),s.Ub(38,"mat-label"),s.Cc(39,"Address : "),s.Tb(),s.Tb(),s.Ub(40,"div",7),s.Ub(41,"mat-form-field",8),s.Pb(42,"input",14),s.Tb(),s.Tb(),s.Tb(),s.Bc(43,D,2,0,"div",15),s.Bc(44,N,2,1,"button",16),s.Bc(45,F,1,1,"mat-spinner",1),s.Tb()}if(2&t){const t=s.gc();s.lc("formGroup",t.detailForm),s.Db(43),s.lc("ngIf",t.detailForm.hasError("whitespace")),s.Db(1),s.lc("ngIf",!t.isSubmitting),s.Db(1),s.lc("ngIf",t.isSubmitting)}}let k=(()=>{class t{constructor(t,e,i,n){this.userDetailService=t,this.formBuilder=e,this.userService=i,this.route=n,this.isLoading=!0,this.isSubmitting=!1,this.detailForm=this.formBuilder.group({firstName:[,[b.t.required]],middleName:[,[b.t.required,this.whitespaceValidator]],lastName:[,[b.t.required,this.whitespaceValidator]],address:["",[b.t.required,this.whitespaceValidator]],studentPN:["",[b.t.required,b.t.pattern("[- +()0-9]+")]],parentPN:["",[b.t.required,b.t.pattern("[- +()0-9]+")]]})}ngOnInit(){this.userDetailService.userName.subscribe(t=>{t&&(this.firstName=t.firstName,this.middleName=t.middleName,this.lastName=t.lastName,this.detailForm.controls.firstName.setValue(t.firstName),this.detailForm.controls.lastName.setValue(t.lastName),this.detailForm.controls.middleName.setValue(t.middleName))}),this.userDetailService.userPN.subscribe(t=>{t&&(this.studentPN=t,this.detailForm.controls.studentPN.setValue(t))}),this.userDetailService.userPPN.subscribe(t=>{t&&(this.parentPN=t,this.detailForm.controls.parentPN.setValue(t))}),this.userDetailService.userAddress.subscribe(t=>{t&&(this.address=t,this.detailForm.controls.address.setValue(t),this.isLoading=!1)})}whitespaceValidator(t){return 0!==(t.value||"").trim().length?null:{whitespace:!0}}onSubmit(){this.isSubmitting=!0;const t=Number(this.route.snapshot.paramMap.get("id"));this.userService.postUserData(this.detailForm.value,t).subscribe(t=>{this.isSubmitting=!1})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(d),s.Ob(b.e),s.Ob(o.j),s.Ob(r.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-user-detail-tab-details"]],decls:3,vars:2,consts:[[1,"container"],[3,"diameter",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"diameter"],[3,"formGroup","ngSubmit"],[1,"wrapper"],["fxFlex","50",1,"label"],["fxFlex","50",1,"input"],["appearance","standard"],["matInput","","formControlName","firstName"],["matInput","","formControlName","middleName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","studentPN"],["matInput","","formControlName","parentPN"],["matInput","","formControlName","address"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Bc(1,_,1,1,"mat-spinner",1),s.Bc(2,y,46,4,"form",2),s.Tb()),2&t&&(s.Db(1),s.lc("ngIf",e.isLoading),s.Db(1),s.lc("ngIf",!e.isLoading))},directives:[n.k,C.b,b.u,b.o,b.g,P.b,M.e,M.b,I.b,b.c,b.n,b.f,h.a],styles:[".container[_ngcontent-%COMP%]{margin:25px auto 100px;width:300px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{height:50px;align-items:center;width:100%}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-align:right;padding-top:16px;margin-right:20px;width:100px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:100px}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:25px auto}.mat-spinner[_ngcontent-%COMP%]{position:relative;margin-left:50%;margin-right:50%}"]}),t})();var j=i("d3UM"),L=i("FKr1"),B=i("1jcm");function V(t,e){1&t&&s.Pb(0,"mat-spinner",3),2&t&&s.lc("diameter",40)}function E(t,e){if(1&t&&s.Pb(0,"mat-option",13),2&t){const t=e.$implicit;s.lc("value",t.id)("innerHTML",t.name,s.vc)}}function A(t,e){if(1&t){const t=s.Vb();s.Ub(0,"div",5),s.Ub(1,"div",6),s.Ub(2,"mat-label"),s.Cc(3),s.Tb(),s.Tb(),s.Ub(4,"div",7),s.Ub(5,"mat-slide-toggle",15),s.cc("change",function(i){s.uc(t);const n=e.$implicit;return s.gc(4).checkSubject(i,n)}),s.Tb(),s.Tb(),s.Tb()}if(2&t){const t=e.$implicit,i=s.gc(4);s.Db(3),s.Ec("",t.name," : "),s.Db(2),s.lc("formGroupName","subjects")("checked",i.checkSubjectToggle(t))}}function R(t,e){if(1&t&&(s.Ub(0,"div"),s.Bc(1,A,6,3,"div",14),s.Tb()),2&t){const t=s.gc(3);s.Db(1),s.lc("ngForOf",t.subjects.data)}}function G(t,e){if(1&t&&(s.Ub(0,"div",5),s.Ub(1,"div",6),s.Ub(2,"mat-label"),s.Cc(3),s.Tb(),s.Tb(),s.Ub(4,"div",7),s.Pb(5,"mat-slide-toggle",16),s.Tb(),s.Tb()),2&t){const t=e.$implicit;s.Db(3),s.Ec("",t.name," : "),s.Db(2),s.lc("formGroupName","subjects")("checked",!0)("disabled",!0)}}function q(t,e){if(1&t&&(s.Ub(0,"div"),s.Bc(1,G,6,4,"div",14),s.Tb()),2&t){const t=s.gc(3);s.Db(1),s.lc("ngForOf",t.subjects.data)}}function z(t,e){if(1&t&&(s.Ub(0,"div"),s.Bc(1,R,2,1,"div",11),s.Bc(2,q,2,1,"div",11),s.Tb()),2&t){const t=s.gc(2);s.Db(1),s.lc("ngIf",t.subjects.allowSubjectSelection),s.Db(1),s.lc("ngIf",!t.subjects.allowSubjectSelection)}}function $(t,e){1&t&&(s.Ub(0,"button",17),s.Cc(1," Update "),s.Tb())}function H(t,e){1&t&&s.Pb(0,"mat-spinner",3),2&t&&s.lc("diameter",40)}function X(t,e){if(1&t){const t=s.Vb();s.Ub(0,"form",4),s.cc("ngSubmit",function(){return s.uc(t),s.gc().onSubmit()}),s.Ub(1,"div",5),s.Ub(2,"div",6),s.Ub(3,"mat-label"),s.Cc(4,"Standard : "),s.Tb(),s.Tb(),s.Ub(5,"div",7),s.Ub(6,"mat-form-field",8),s.Ub(7,"mat-select",9),s.cc("selectionChange",function(e){return s.uc(t),s.gc().getSubjects(e.value)}),s.Bc(8,E,1,2,"mat-option",10),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Bc(9,z,3,2,"div",11),s.Bc(10,$,2,0,"button",12),s.Bc(11,H,1,1,"mat-spinner",1),s.Tb()}if(2&t){const t=s.gc();s.lc("formGroup",t.standardForm),s.Db(8),s.lc("ngForOf",t.standards),s.Db(1),s.lc("ngIf",t.subjects),s.Db(1),s.lc("ngIf",!t.isSubmitting),s.Db(1),s.lc("ngIf",t.isSubmitting)}}let K=(()=>{class t{constructor(t,e,i,n,a,r){this.userDetailService=t,this.standardService=e,this.formBuilder=i,this.subjectService=n,this.userService=a,this.route=r,this.isLoading=!0,this.isSubmitting=!1,this.standardForm=this.formBuilder.group({standardId:["",[b.t.required]],subjects:this.formBuilder.array([],b.t.required)})}ngOnInit(){this.standardService.getStandard().subscribe(t=>{this.standards=t}),this.userDetailService.userStandard.subscribe(t=>{t&&(this.userStandardId=t.id,this.getSubjects(this.userStandardId),this.standardForm.get("standardId").setValue(this.userStandardId))}),this.userDetailService.userSubject.subscribe(t=>{if(t){this.userSubjects=t;for(const t of this.userSubjects)this.standardForm.controls.subjects.push(this.patchValues(t.subjectId,t.name))}})}getSubjects(t){this.standardForm.controls.subjects.clear(),this.subjectService.getSubjectByStandardId(t).subscribe(t=>{if(this.subjects=t,!this.subjects.allowSubjectSelection)for(const e of this.subjects.data)this.standardForm.controls.subjects.push(this.patchValues(e.id,e.name));this.isLoading=!1})}checkSubject(t,e){t.checked?this.standardForm.controls.subjects.push(this.patchValues(e.id,e.name)):this.standardForm.controls.subjects.removeAt(this.standardForm.controls.subjects.value.findIndex((t,i)=>t.id===e.id))}patchValues(t,e){return this.formBuilder.group({id:[t],name:[e]})}checkSubjectToggle(t){for(const e of this.userSubjects)if(t.id===e.subjectId)return!0}onSubmit(){this.isSubmitting=!0,console.log(this.standardForm.value);const t=Number(this.route.snapshot.paramMap.get("id"));this.userService.postUserStandard(this.standardForm.value,t).subscribe(t=>{this.isSubmitting=!1,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(d),s.Ob(o.h),s.Ob(b.e),s.Ob(o.i),s.Ob(o.j),s.Ob(r.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-user-standard-tab-details"]],decls:3,vars:2,consts:[[1,"container"],[3,"diameter",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"diameter"],[3,"formGroup","ngSubmit"],[1,"wrapper"],["fxFlex","50",1,"label"],["fxFlex","50",1,"input"],["appearance","standard"],["formControlName","standardId",3,"selectionChange"],[3,"value","innerHTML",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-raised-button","","color","primary",4,"ngIf"],[3,"value","innerHTML"],["class","wrapper",4,"ngFor","ngForOf"],["color","primary",3,"formGroupName","checked","change"],["color","primary",3,"formGroupName","checked","disabled"],["mat-raised-button","","color","primary"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Bc(1,V,1,1,"mat-spinner",1),s.Bc(2,X,12,5,"form",2),s.Tb()),2&t&&(s.Db(1),s.lc("ngIf",e.isLoading),s.Db(1),s.lc("ngIf",!e.isLoading))},directives:[n.k,C.b,b.u,b.o,b.g,P.b,M.e,M.b,j.a,b.n,b.f,n.j,L.n,B.a,b.h,h.a],styles:[".container[_ngcontent-%COMP%]{margin:25px auto 100px;width:100%}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{height:50px;align-items:center}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-align:right;padding-top:16px;margin-right:20px}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:25px auto}.mat-spinner[_ngcontent-%COMP%]{position:relative;margin-left:50%;margin-right:50%}"]}),t})();var J=i("bv9b");function Q(t,e){1&t&&s.Pb(0,"mat-progress-bar",4)}let Y=(()=>{class t{constructor(t,e){this.route=t,this.userDetailService=e,this.isLoading=!0}ngOnInit(){const t=Number(this.route.snapshot.paramMap.get("id"));this.userDetailService.getUser(t),this.isLoading=!1}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(r.a),s.Ob(d))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-user-detail"]],decls:7,vars:1,consts:[["mode","indeterminate",4,"ngIf"],["mat-align-tabs","center"],["label","Detail"],["label","Standard"],["mode","indeterminate"]],template:function(t,e){1&t&&(s.Bc(0,Q,1,0,"mat-progress-bar",0),s.Pb(1,"app-user-detail-header"),s.Ub(2,"mat-tab-group",1),s.Ub(3,"mat-tab",2),s.Pb(4,"app-user-detail-tab-details"),s.Tb(),s.Ub(5,"mat-tab",3),s.Pb(6,"app-user-standard-tab-details"),s.Tb(),s.Tb()),2&t&&s.lc("ngIf",e.isLoading)},directives:[n.k,T,w.b,w.a,k,K,J.a],encapsulation:2}),t})();var Z=i("Dh3D"),W=i("+0xr"),tt=i("M9IT");function et(t,e){1&t&&s.Pb(0,"mat-progress-bar",29)}function it(t,e){if(1&t&&s.Pb(0,"mat-option",30),2&t){const t=e.$implicit;s.lc("value",t.id)("innerHtml",t.name,s.vc)}}function nt(t,e){1&t&&(s.Ub(0,"th",31),s.Cc(1," Name "),s.Tb())}const at=function(t){return[t]};function rt(t,e){if(1&t&&(s.Ub(0,"td",32),s.Cc(1),s.Tb()),2&t){const t=e.$implicit;s.lc("routerLink",s.pc(3,at,t.userId)),s.Db(1),s.Fc(" ",t.firstName," ",t.middleName," ")}}function st(t,e){1&t&&(s.Ub(0,"th",31),s.Cc(1," Email "),s.Tb())}function ct(t,e){if(1&t&&(s.Ub(0,"td",33),s.Cc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.Ec(" ",t.email," ")}}function ot(t,e){1&t&&(s.Ub(0,"th",31),s.Cc(1," Standard "),s.Tb())}function dt(t,e){if(1&t&&(s.Ub(0,"td",33),s.Cc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.Ec(" ",t.standardName," ")}}function lt(t,e){1&t&&(s.Ub(0,"th",31),s.Cc(1," Enrolled On "),s.Tb())}function bt(t,e){if(1&t&&(s.Ub(0,"td",33),s.Cc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.Ec(" ",t.createdAt," ")}}function ut(t,e){1&t&&(s.Ub(0,"th",31),s.Cc(1," Verified "),s.Tb())}function mt(t,e){if(1&t&&(s.Ub(0,"td",33),s.Pb(1,"i",34),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.lc("ngClass",t.isVerified?"fa-check\n              text-success":"fa-times text-danger")}}function gt(t,e){1&t&&s.Pb(0,"tr",35)}function ht(t,e){1&t&&s.Pb(0,"tr",36)}const ft=[{path:"",component:(()=>{class t{constructor(t,e){this.userService=t,this.standardService=e,this.displayedColumns=["firstName","email","standardName","isVerified","createdAt"],this.pageIndex=1,this.userPerPage=20,this.pageSizeOptions=[20,50,100],this.filterStandardId="",this.filterStatus="",this.isLoading=!0,this.observer={next:t=>{t.forEach(t=>{t.createdAt=new Date(t.createdAt).toDateString()}),this.dataSource=new W.k(t),this.dataSource.sort=this.sort,this.isLoading=!1},error:t=>console.error("Observer got an error: "+t)}}ngOnInit(){this.getUserCount(),this.userService.getUsers(this.userPerPage,1,this.filterStandardId,this.filterStatus).subscribe(this.observer),this.standardService.getStandard().subscribe(t=>{this.standards=t})}onChangedPage(t){this.isLoading=!0,this.userService.getUsers(t.pageSize,t.pageIndex+1,this.filterStandardId,this.filterStatus).subscribe(this.observer),this.pageIndex=t.pageIndex+1}standardIdFilter(t){console.log(t),this.filterStandardId=t}isActiveFilter(t){console.log(t),this.filterStatus=t}setFilter(){console.log("clicked"),this.getUserCount(),this.userService.getUsers(this.userPerPage,1,this.filterStandardId,this.filterStatus).subscribe(this.observer)}getUserCount(){this.userService.getUserCount(this.filterStandardId,this.filterStatus).subscribe(t=>{this.count=t.count})}applyFilter(t){this.isLoading=!0,this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage(),this.isLoading=!1}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(o.j),s.Ob(o.h))},t.\u0275cmp=s.Ib({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&s.Gc(Z.a,1),2&t){let t;s.rc(t=s.dc())&&(e.sort=t.first)}},decls:52,vars:8,consts:[["mode","indeterminate",4,"ngIf"],[1,"container"],[1,"filter-div"],["appearance","standard",1,"filter-input"],["matInput","","placeholder","filterlist...",3,"keyup"],["input",""],[1,"filter-input"],["appearance","standard"],[3,"selectionChange"],["value",""],[3,"value","innerHtml",4,"ngFor","ngForOf"],["value","1"],["value","0"],[1,"add-icon"],["mat-flat-button","","color","primary",3,"click"],[1,"fas","fa-filter"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","firstName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","name-td","mat-cell","",3,"routerLink",4,"matCellDef"],["matColumnDef","email"],["mat-cell","",4,"matCellDef"],["matColumnDef","standardName"],["matColumnDef","createdAt"],["matColumnDef","isVerified"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSizeOptions","pageSize","page"],["mode","indeterminate"],[3,"value","innerHtml"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"name-td",3,"routerLink"],["mat-cell",""],[1,"fas","fa-md",3,"ngClass"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(s.Bc(0,et,1,0,"mat-progress-bar",0),s.Ub(1,"div",1),s.Ub(2,"div",2),s.Ub(3,"div"),s.Ub(4,"mat-form-field",3),s.Ub(5,"mat-label"),s.Cc(6,"Filter"),s.Tb(),s.Ub(7,"input",4,5),s.cc("keyup",function(t){return e.applyFilter(t)}),s.Tb(),s.Tb(),s.Tb(),s.Ub(9,"div",6),s.Ub(10,"mat-form-field",7),s.Ub(11,"mat-label"),s.Cc(12,"Standard"),s.Tb(),s.Ub(13,"mat-select",8),s.cc("selectionChange",function(t){return e.standardIdFilter(t.value)}),s.Ub(14,"mat-option",9),s.Cc(15,"- - -"),s.Tb(),s.Bc(16,it,1,2,"mat-option",10),s.Tb(),s.Tb(),s.Tb(),s.Ub(17,"div",6),s.Ub(18,"mat-form-field",7),s.Ub(19,"mat-label"),s.Cc(20,"Status"),s.Tb(),s.Ub(21,"mat-select",8),s.cc("selectionChange",function(t){return e.isActiveFilter(t.value)}),s.Ub(22,"mat-option",9),s.Cc(23,"- - -"),s.Tb(),s.Ub(24,"mat-option",11),s.Cc(25,"True"),s.Tb(),s.Ub(26,"mat-option",12),s.Cc(27,"False"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(28,"div",13),s.Ub(29,"button",14),s.cc("click",function(){return e.setFilter()}),s.Cc(30," Apply "),s.Pb(31,"i",15),s.Tb(),s.Tb(),s.Tb(),s.Ub(32,"div",16),s.Ub(33,"table",17),s.Sb(34,18),s.Bc(35,nt,2,0,"th",19),s.Bc(36,rt,2,5,"td",20),s.Rb(),s.Sb(37,21),s.Bc(38,st,2,0,"th",19),s.Bc(39,ct,2,1,"td",22),s.Rb(),s.Sb(40,23),s.Bc(41,ot,2,0,"th",19),s.Bc(42,dt,2,1,"td",22),s.Rb(),s.Sb(43,24),s.Bc(44,lt,2,0,"th",19),s.Bc(45,bt,2,1,"td",22),s.Rb(),s.Sb(46,25),s.Bc(47,ut,2,0,"th",19),s.Bc(48,mt,2,1,"td",22),s.Rb(),s.Bc(49,gt,1,0,"tr",26),s.Bc(50,ht,1,0,"tr",27),s.Tb(),s.Ub(51,"mat-paginator",28),s.cc("page",function(t){return e.onChangedPage(t)}),s.Tb(),s.Tb(),s.Tb()),2&t&&(s.lc("ngIf",e.isLoading),s.Db(16),s.lc("ngForOf",e.standards),s.Db(17),s.lc("dataSource",e.dataSource),s.Db(16),s.lc("matHeaderRowDef",e.displayedColumns),s.Db(1),s.lc("matRowDefColumns",e.displayedColumns),s.Db(1),s.lc("length",e.count)("pageSizeOptions",e.pageSizeOptions)("pageSize",e.userPerPage))},directives:[n.k,M.b,M.e,I.b,j.a,L.n,n.j,h.a,W.j,Z.a,W.c,W.e,W.b,W.g,W.i,tt.a,J.a,W.d,Z.b,W.a,r.c,n.i,v.a,W.f,W.h],styles:[".filter-div[_ngcontent-%COMP%]{width:100%;height:80px;display:inline-block;padding:5px 0;border-radius:20px 20px 0 0;background-color:#a2d6f91a;box-shadow:0 5px 5px -3px #0000001a,0 8px 10px 1px #00000012,0 3px 14px 2px #0000000f}.filter-div[_ngcontent-%COMP%]   .filter-input[_ngcontent-%COMP%]{margin-left:20px;float:left;max-width:300px}.container[_ngcontent-%COMP%]{width:95%;margin:50px auto 100px}.container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:20%;text-align:center}.container[_ngcontent-%COMP%]   .name-td[_ngcontent-%COMP%]{cursor:pointer;text-decoration:underline;-webkit-text-decoration-color:grey;text-decoration-color:grey}"]}),t})()},{path:":id",component:Y}];let pt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({imports:[[r.f.forChild(ft)],r.f]}),t})(),vt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({providers:[d],imports:[[n.c,pt,a.a]]}),t})()}}]);