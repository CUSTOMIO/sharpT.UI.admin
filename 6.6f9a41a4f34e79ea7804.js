(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Pmxt:function(t,e,i){"use strict";i.r(e),i.d(e,"ExaminationDetailModule",function(){return rt});var a=i("ofXK"),n=i("PCNd"),o=i("tyNb"),r=i("M9IT"),c=i("Dh3D"),d=i("+0xr"),b=i("3Pt+"),s=i("0IaG"),l=i("fXoL"),m=i("RiFG"),u=i("AytR"),p=i("lJxs"),f=i("rW8v"),g=i("tk/3");let h=(()=>{class t{constructor(t){this.http=t}academicYear(){return this.http.get(`${u.a.api_endpoint}/academicYear`).pipe(Object(p.a)(t=>t.map(t=>new f.a(t))))}}return t.\u0275fac=function(e){return new(e||t)(l.Yb(g.b))},t.\u0275prov=l.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var x=i("NFeN"),D=i("f0Cb"),O=i("bv9b"),C=i("xHqg"),v=i("bTqV"),T=i("XiUz"),U=i("kmnG"),P=i("d3UM"),S=i("qFsG"),I=i("iadO"),w=i("FKr1"),M=i("Xa2L");function j(t,e){1&t&&l.Pb(0,"mat-progress-bar",5)}function F(t,e){1&t&&l.Cc(0,"Examination Detail")}function L(t,e){if(1&t&&l.Pb(0,"mat-option",28),2&t){const t=e.$implicit;l.lc("value",t.id)("innerHTML",t.name,l.vc)}}function _(t,e){if(1&t&&l.Pb(0,"mat-option",28),2&t){const t=e.$implicit;l.lc("value",t.id)("innerHTML",t.name,l.vc)}}function k(t,e){if(1&t&&l.Pb(0,"mat-option",28),2&t){const t=e.$implicit;l.lc("value",t.id)("innerHTML",t.startYear+"-"+t.endYear,l.vc)}}function B(t,e){if(1&t){const t=l.Vb();l.Ub(0,"form",12),l.Ub(1,"div",13),l.Ub(2,"div",14),l.Ub(3,"mat-label"),l.Cc(4,"Examination Name : "),l.Tb(),l.Tb(),l.Ub(5,"div",15),l.Ub(6,"mat-form-field",16),l.Ub(7,"mat-select",17),l.Bc(8,L,1,2,"mat-option",18),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(9,"div",13),l.Ub(10,"div",14),l.Ub(11,"mat-label"),l.Cc(12,"Standard : "),l.Tb(),l.Tb(),l.Ub(13,"div",15),l.Ub(14,"mat-form-field",16),l.Ub(15,"mat-select",19),l.cc("selectionChange",function(e){return l.uc(t),l.gc(2).getSubjects(e.value)}),l.Bc(16,_,1,2,"mat-option",18),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(17,"div",13),l.Ub(18,"div",14),l.Ub(19,"mat-label"),l.Cc(20,"Academic Year : "),l.Tb(),l.Tb(),l.Ub(21,"div",15),l.Ub(22,"mat-form-field",16),l.Ub(23,"mat-select",20),l.Bc(24,k,1,2,"mat-option",18),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(25,"div",13),l.Ub(26,"div",14),l.Ub(27,"mat-label"),l.Cc(28,"Start On : "),l.Tb(),l.Tb(),l.Ub(29,"div",15),l.Ub(30,"mat-form-field",21),l.Pb(31,"input",22),l.Pb(32,"mat-datepicker-toggle",23),l.Pb(33,"mat-datepicker",null,24),l.Tb(),l.Tb(),l.Tb(),l.Ub(35,"div",13),l.Ub(36,"div",14),l.Ub(37,"mat-label"),l.Cc(38,"End On : "),l.Tb(),l.Tb(),l.Ub(39,"div",15),l.Ub(40,"mat-form-field",21),l.Pb(41,"input",25),l.Pb(42,"mat-datepicker-toggle",23),l.Pb(43,"mat-datepicker",null,26),l.Tb(),l.Tb(),l.Tb(),l.Ub(45,"div",13),l.Ub(46,"div",14),l.Ub(47,"mat-label"),l.Cc(48,"Best Of : "),l.Tb(),l.Tb(),l.Ub(49,"div",15),l.Ub(50,"mat-form-field",16),l.Pb(51,"input",27),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=l.sc(34),e=l.sc(44),i=l.gc(2);l.lc("formGroup",i.editForm),l.Db(8),l.lc("ngForOf",i.examination),l.Db(8),l.lc("ngForOf",i.standard),l.Db(8),l.lc("ngForOf",i.academicYear),l.Db(7),l.lc("matDatepicker",t),l.Db(1),l.lc("for",t),l.Db(9),l.lc("matDatepicker",e),l.Db(1),l.lc("for",e)}}function y(t,e){1&t&&l.Cc(0,"Subject Detail")}function N(t,e){if(1&t&&(l.Ub(0,"div"),l.Ub(1,"div",32),l.Ub(2,"mat-form-field",33),l.Ub(3,"mat-label"),l.Cc(4,"Subject"),l.Tb(),l.Pb(5,"input",34),l.Tb(),l.Ub(6,"mat-form-field",35),l.Ub(7,"mat-label"),l.Cc(8,"Out Of"),l.Tb(),l.Pb(9,"input",36),l.Tb(),l.Tb(),l.Tb()),2&t){const t=e.$implicit;l.Db(1),l.lc("formGroup",t)}}function E(t,e){if(1&t){const t=l.Vb();l.Ub(0,"button",37),l.cc("click",function(){return l.uc(t),l.gc(3).onSubmit()}),l.Cc(1),l.Tb()}if(2&t){const t=l.gc(3);l.lc("disabled",!t.editForm.valid||t.editForm.untouched),l.Db(1),l.Ec(" ","edit"===t.data.mode?"Update":"Add"," ")}}function R(t,e){if(1&t&&(l.Ub(0,"form",29),l.Bc(1,N,10,1,"div",30),l.Bc(2,E,2,2,"button",31),l.Tb()),2&t){const t=l.gc(2);l.lc("formGroup",t.editForm),l.Db(1),l.lc("ngForOf",t.t.controls),l.Db(1),l.lc("ngIf",!t.spinnerLoading&&!t.subjectDetailLoading)}}function Y(t,e){1&t&&l.Pb(0,"mat-spinner",38),2&t&&l.lc("diameter",40)}function G(t,e){if(1&t&&(l.Ub(0,"mat-horizontal-stepper"),l.Ub(1,"mat-step"),l.Bc(2,F,1,0,"ng-template",6),l.Ub(3,"div",7),l.Bc(4,B,52,8,"form",8),l.Ub(5,"div"),l.Ub(6,"button",9),l.Cc(7,"Next"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(8,"mat-step"),l.Bc(9,y,1,0,"ng-template",6),l.Bc(10,R,3,3,"form",10),l.Bc(11,Y,1,1,"mat-spinner",11),l.Tb(),l.Tb()),2&t){const t=l.gc();l.Db(4),l.lc("ngIf",t.data.examinationDetail),l.Db(6),l.lc("ngIf",!t.subjectDetailLoading),l.Db(1),l.lc("ngIf",t.subjectDetailLoading||t.spinnerLoading)}}let q=(()=>{class t{constructor(t,e,i,a,n,o,r,c,d){this.data=t,this.dialogRef=e,this.formBuilder=i,this.standardService=a,this.examinationService=n,this.examinationDetailService=o,this.examinationSubjectDetailService=r,this.academicYearService=c,this.subjectService=d,this.isLoading=!0,this.spinnerLoading=!1,this.subjectDetailLoading=!0,this.editForm=i.group({examinationId:[,[b.t.required]],standardId:[,[b.t.required]],academicYearId:[,[b.t.required]],startOn:[,[b.t.required]],endOn:[,[b.t.required]],bestOf:[],data:new b.d([],b.t.required)}),"edit"===t.mode&&(this.getSubjects(t.examinationDetail.standardId),this.startOn=new Date(t.examinationDetail.startOn),this.endOn=new Date(t.examinationDetail.endOn),this.editForm.get("standardId").setValue(t.examinationDetail.standardId),this.editForm.get("startOn").setValue(this.startOn),this.editForm.get("endOn").setValue(this.endOn),this.editForm.get("examinationId").setValue(t.examinationDetail.examinationId),this.editForm.get("academicYearId").setValue(t.examinationDetail.academicYearId),null!=t.examinationDetail.bestOf&&this.editForm.get("bestOf").setValue(t.examinationDetail.bestOf))}get t(){return this.editForm.controls.data}ngOnInit(){this.standardService.getStandard().subscribe(t=>{this.standard=t}),this.examinationService.examination().subscribe(t=>{console.log(t),this.examination=t}),this.academicYearService.academicYear().subscribe(t=>{this.academicYear=t}),this.isLoading=!1}getSubjects(t){this.editForm.controls.data.value&&this.t.clear(),this.subjectService.getSubjectByStandardId(t).subscribe(t=>{this.subjects=t;for(let e of this.subjects.data)this.t.push(this.formBuilder.group({subjectId:[e.id,[b.t.required]],subjectName:[e.name,[b.t.required]],outOf:["",[b.t.required]]}));"edit"===this.data.mode?this.getExaminationSubjectDetail(this.data.examinationDetail.id):this.subjectDetailLoading=!1})}getExaminationSubjectDetail(t){this.examinationSubjectDetailService.getExaminationSubjectDetail(t).subscribe(t=>{t.forEach(t=>{this.subjects.data.forEach(e=>{if(t.subjectId==e.id){const e=this.t.value.findIndex((e,i)=>e.subjectId===t.subjectId);this.t.at(e).patchValue({outOf:t.outOf})}})}),this.subjectDetailLoading=!1})}onSubmit(){if(!this.editForm.valid)return;this.spinnerLoading=!0;const t={next:t=>{console.log(t),t.message&&this.dialogRef.close({data:t.message}),this.spinnerLoading=!1},error:t=>{console.error(t),this.spinnerLoading=!1}};"edit"===this.data.mode?this.examinationDetailService.postEditExaminationDetail(this.editForm.value,this.data.examinationDetail.id).subscribe(t):"new"===this.data.mode&&this.examinationDetailService.postAddExaminationDetail(this.editForm.value).subscribe(t)}closeDialog(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(s.a),l.Ob(s.d),l.Ob(b.e),l.Ob(m.i),l.Ob(m.d),l.Ob(m.c),l.Ob(m.e),l.Ob(h),l.Ob(m.j))},t.\u0275cmp=l.Ib({type:t,selectors:[["ng-component"]],decls:8,vars:2,consts:[[1,"header"],[1,"mat-subheading-2"],[3,"click"],["mode","indeterminate",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],["matStepLabel",""],[1,"container"],["class","pt-20",3,"formGroup",4,"ngIf"],["mat-button","","matStepperNext",""],[3,"formGroup",4,"ngIf"],[3,"diameter",4,"ngIf"],[1,"pt-20",3,"formGroup"],[1,"wrapper"],["fxFlex","35",1,"label"],["fxFlex","65",1,"input"],["appearance","standard"],["formControlName","examinationId"],[3,"value","innerHTML",4,"ngFor","ngForOf"],["formControlName","standardId",3,"selectionChange"],["formControlName","academicYearId"],["appearance","fill",1,"date"],["matInput","","formControlName","startOn",3,"matDatepicker"],["matSuffix","",3,"for"],["startOn",""],["matInput","","formControlName","endOn",3,"matDatepicker"],["endOn",""],["type","number","matInput","","formControlName","bestOf"],[3,"value","innerHTML"],[3,"formGroup"],[4,"ngFor","ngForOf"],["type","submit","mat-flat-button","","color","accent",3,"disabled","click",4,"ngIf"],["align","center",3,"formGroup"],["appearance","legacy",1,"mr-10"],["matInput","","formControlName","subjectName","readonly",""],["appearance","standard",1,"ml-10"],["type","number","matInput","","formControlName","outOf"],["type","submit","mat-flat-button","","color","accent",3,"disabled","click"],[3,"diameter"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"h1",1),l.Cc(2,"Examination Detail"),l.Tb(),l.Ub(3,"mat-icon",2),l.cc("click",function(){return e.closeDialog()}),l.Cc(4,"close"),l.Tb(),l.Tb(),l.Pb(5,"mat-divider"),l.Bc(6,j,1,0,"mat-progress-bar",3),l.Bc(7,G,12,3,"mat-horizontal-stepper",4)),2&t&&(l.Db(6),l.lc("ngIf",e.isLoading),l.Db(1),l.lc("ngIf",!e.isLoading))},directives:[x.a,D.a,a.k,O.a,C.a,C.b,C.c,v.a,C.e,b.u,b.o,b.g,T.b,U.e,U.b,P.a,b.n,b.f,a.j,S.b,b.c,I.e,I.h,U.f,I.d,b.r,w.n,M.b],styles:[".header[_ngcontent-%COMP%]{height:34px;width:100%}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{float:left;margin-bottom:0}.header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:0;cursor:pointer}.container[_ngcontent-%COMP%]{margin:0 auto 25px;width:100%}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{height:50px;align-items:center}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-align:right;padding-top:16px;margin-right:20px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:180px}button[_ngcontent-%COMP%]{display:block;margin:10px auto 0}"]}),t})();function z(t,e){1&t&&l.Pb(0,"mat-progress-bar",22)}function V(t,e){1&t&&(l.Ub(0,"th",23),l.Cc(1," Name "),l.Tb())}function $(t,e){if(1&t&&(l.Ub(0,"td",24),l.Cc(1),l.Tb()),2&t){const t=e.$implicit;l.Db(1),l.Ec(" ",t.examinationName," ")}}function A(t,e){1&t&&(l.Ub(0,"th",23),l.Cc(1," Standard "),l.Tb())}function H(t,e){if(1&t&&(l.Ub(0,"td",24),l.Cc(1),l.Tb()),2&t){const t=e.$implicit;l.Db(1),l.Ec(" ",t.standardName," ")}}function X(t,e){1&t&&(l.Ub(0,"th",23),l.Cc(1," Start On "),l.Tb())}function J(t,e){if(1&t&&(l.Ub(0,"td",24),l.Cc(1),l.Tb()),2&t){const t=e.$implicit;l.Db(1),l.Ec(" ",t.startOn," ")}}function K(t,e){1&t&&(l.Ub(0,"th",23),l.Cc(1," End On "),l.Tb())}function Q(t,e){if(1&t&&(l.Ub(0,"td",24),l.Cc(1),l.Tb()),2&t){const t=e.$implicit;l.Db(1),l.Ec(" ",t.endOn," ")}}function W(t,e){1&t&&(l.Ub(0,"th",23),l.Cc(1," Updated At "),l.Tb())}function Z(t,e){if(1&t&&(l.Ub(0,"td",24),l.Cc(1),l.Tb()),2&t){const t=e.$implicit;l.Db(1),l.Ec(" ",t.updatedAt," ")}}function tt(t,e){1&t&&l.Pb(0,"th",25)}function et(t,e){if(1&t){const t=l.Vb();l.Ub(0,"td",24),l.Ub(1,"i",26),l.cc("click",function(){l.uc(t);const i=e.$implicit;return l.gc().openDialog(i,"edit")}),l.Tb(),l.Tb()}}function it(t,e){1&t&&l.Pb(0,"tr",27)}function at(t,e){1&t&&l.Pb(0,"tr",28)}const nt=[{path:"",component:(()=>{class t{constructor(t,e){this.examinationDetailService=t,this.dialog=e,this.displayedColumns=["examinationName","standardName","startOn","endOn","updatedAt","edit"],this.examinationDetailPerPage=20,this.pageSizeOptions=[20,50,100],this.pageIndex=1,this.isLoading=!0,this.observer={next:t=>{this.dataSource=new d.k(t),t.forEach(t=>{t.startOn=new Date(t.startOn).toDateString(),t.endOn=new Date(t.endOn).toDateString(),t.updatedAt=new Date(t.updatedAt).toDateString()}),this.dataSource.sort=this.sort,this.isLoading=!1},error:t=>console.error("Observer got an error: "+t)}}ngOnInit(){this.examinationDetailService.examinationDetailCount().subscribe(t=>{this.count=t.count}),this.examinationDetailService.getExaminationDetail(this.examinationDetailPerPage,1).subscribe(this.observer)}onChangedPage(t){this.isLoading=!0,this.examinationDetailService.getExaminationDetail(t.pageSize,t.pageIndex+1).subscribe(this.observer),this.pageIndex=t.pageIndex+1}applyFilter(t){this.isLoading=!0,this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage(),this.isLoading=!1}openDialog(t,e){this.dialog.open(q,{disableClose:!0,width:"550px",height:"600px",data:{examinationDetail:t,mode:e}}).afterClosed().subscribe(t=>{t&&(this.examinationDetailService.getExaminationDetail(this.examinationDetailPerPage,this.pageIndex).subscribe(this.observer),this.count+=1)})}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(m.c),l.Ob(s.b))},t.\u0275cmp=l.Ib({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&(l.Gc(r.a,1),l.Gc(c.a,1)),2&t){let t;l.rc(t=l.dc())&&(e.paginator=t.first),l.rc(t=l.dc())&&(e.sort=t.first)}},decls:35,vars:7,consts:[["mode","indeterminate",4,"ngIf"],[1,"container"],[1,"filter-div"],["appearance","standard",1,"filter-input"],["matInput","","placeholder","filterlist...",3,"keyup"],["input",""],[1,"add-icon"],["mat-flat-button","","color","primary",3,"click"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","examinationName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","standardName"],["matColumnDef","startOn"],["matColumnDef","endOn"],["matColumnDef","updatedAt"],["matColumnDef","edit"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSizeOptions","pageSize","page"],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"far","fa-edit","text-dark",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(l.Bc(0,z,1,0,"mat-progress-bar",0),l.Ub(1,"div",1),l.Ub(2,"div",2),l.Ub(3,"div"),l.Ub(4,"mat-form-field",3),l.Ub(5,"mat-label"),l.Cc(6,"Filter"),l.Tb(),l.Ub(7,"input",4,5),l.cc("keyup",function(t){return e.applyFilter(t)}),l.Tb(),l.Tb(),l.Tb(),l.Ub(9,"div",6),l.Ub(10,"button",7),l.cc("click",function(){return e.openDialog({},"new")}),l.Cc(11,"New"),l.Tb(),l.Tb(),l.Tb(),l.Ub(12,"div",8),l.Ub(13,"table",9),l.Sb(14,10),l.Bc(15,V,2,0,"th",11),l.Bc(16,$,2,1,"td",12),l.Rb(),l.Sb(17,13),l.Bc(18,A,2,0,"th",11),l.Bc(19,H,2,1,"td",12),l.Rb(),l.Sb(20,14),l.Bc(21,X,2,0,"th",11),l.Bc(22,J,2,1,"td",12),l.Rb(),l.Sb(23,15),l.Bc(24,K,2,0,"th",11),l.Bc(25,Q,2,1,"td",12),l.Rb(),l.Sb(26,16),l.Bc(27,W,2,0,"th",11),l.Bc(28,Z,2,1,"td",12),l.Rb(),l.Sb(29,17),l.Bc(30,tt,1,0,"th",18),l.Bc(31,et,2,0,"td",12),l.Rb(),l.Bc(32,it,1,0,"tr",19),l.Bc(33,at,1,0,"tr",20),l.Tb(),l.Ub(34,"mat-paginator",21),l.cc("page",function(t){return e.onChangedPage(t)}),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.lc("ngIf",e.isLoading),l.Db(13),l.lc("dataSource",e.dataSource),l.Db(19),l.lc("matHeaderRowDef",e.displayedColumns),l.Db(1),l.lc("matRowDefColumns",e.displayedColumns),l.Db(1),l.lc("length",e.count)("pageSizeOptions",e.pageSizeOptions)("pageSize",e.examinationDetailPerPage))},directives:[a.k,U.b,U.e,S.b,v.a,d.j,c.a,d.c,d.e,d.b,d.g,d.i,r.a,O.a,d.d,c.b,d.a,d.f,d.h],styles:[".filter-div[_ngcontent-%COMP%]{width:100%;height:80px;display:inline-block;padding:5px 0;border-radius:20px 20px 0 0;background-color:#a2d6f91a;box-shadow:0 5px 5px -3px #0000001a,0 8px 10px 1px #00000012,0 3px 14px 2px #0000000f}.filter-div[_ngcontent-%COMP%]   .filter-input[_ngcontent-%COMP%]{margin-left:20px;float:left;max-width:300px}.filter-div[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{margin:25px 20px 0 0;float:right}.container[_ngcontent-%COMP%]{width:95%;margin:50px auto 100px}.container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:20%;text-align:center}"]}),t})()}];let ot=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({imports:[[o.f.forChild(nt)],o.f]}),t})(),rt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({providers:[],imports:[[a.c,n.a,ot]]}),t})()}}]);