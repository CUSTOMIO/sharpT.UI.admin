(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"gs+/":function(t,e,i){"use strict";i.r(e),i.d(e,"ResultModule",function(){return y});var a=i("ofXK"),n=i("PCNd"),r=i("tyNb"),s=i("3Pt+"),o=i("0IaG"),c=i("fXoL"),l=i("RiFG"),u=i("NFeN"),d=i("f0Cb"),b=i("bTqV"),m=i("kmnG"),h=i("qFsG"),f=i("Xa2L");function p(t,e){if(1&t&&(c.Ub(0,"div"),c.Ub(1,"div",9),c.Ub(2,"mat-form-field",10),c.Ub(3,"mat-label"),c.Cc(4,"Name"),c.Tb(),c.Pb(5,"input",11),c.Tb(),c.Ub(6,"mat-form-field",12),c.Ub(7,"mat-label"),c.Cc(8,"Marks Obtained"),c.Tb(),c.Pb(9,"input",13),c.Tb(),c.Ub(10,"mat-form-field",10),c.Ub(11,"mat-label"),c.Cc(12,"Out Of"),c.Tb(),c.Pb(13,"input",14),c.Tb(),c.Tb(),c.Tb()),2&t){const t=e.$implicit;c.Db(1),c.lc("formGroup",t)}}function g(t,e){if(1&t){const t=c.Vb();c.Ub(0,"form",6),c.cc("ngSubmit",function(){return c.uc(t),c.gc().onSubmit()}),c.Bc(1,p,14,1,"div",7),c.Ub(2,"button",8),c.Cc(3),c.Tb(),c.Tb()}if(2&t){const t=c.gc();c.lc("formGroup",t.resultForm),c.Db(1),c.lc("ngForOf",t.t.controls),c.Db(2),c.Dc(t.newResult?"Submit":"Update")}}function C(t,e){1&t&&c.Pb(0,"mat-spinner",15),2&t&&c.lc("diameter",40)}let x=(()=>{class t{constructor(t,e,i,a,n,r){this.data=t,this.dialogRef=e,this.userService=i,this.formBuilder=a,this.examinationSubjectDetailService=n,this.resultService=r,this.subjectArray=[],this.newResult=!0,this.spinnerLoading=!0,this.isSubmitting=!1,this.resultForm=this.formBuilder.group({data:new s.d([])})}get t(){return this.resultForm.controls.data}ngOnInit(){this.userService.getUserSubject(this.data.user.userId).subscribe(t=>{this.userSubject=t;for(const e of this.userSubject)this.subjectArray.push(+e.subjectId),this.t.push(this.formBuilder.group({userId:[{value:this.data.user.userId,disabled:!0},[s.t.required]],examinationDetailId:[this.data.searchResult.examinationDetailId,[s.t.required]],subjectId:[e.subjectId,[s.t.required]],subjectName:[{value:e.name,disabled:!0},[s.t.required]],marksObtained:["",[s.t.required]],outOf:[{value:""},[s.t.required]]}));this.autoFillMarksObtained(),this.getExaminationSubjectDetail(this.data.searchResult.examinationDetailId)})}patchValues(t){return this.formBuilder.group({subjectId:[t],examinationDetailId:this.data.searchResult.examinationDetailId,userId:this.data.user.userId})}getExaminationSubjectDetail(t){this.examinationSubjectDetailService.getExaminationSubjectDetail(t).subscribe(t=>{t.forEach(t=>{this.userSubject.forEach(e=>{if(t.subjectId===e.subjectId){const e=this.t.value.findIndex((e,i)=>e.subjectId===t.subjectId);this.t.at(e).patchValue({outOf:t.outOf})}})}),this.spinnerLoading=!1})}autoFillMarksObtained(){this.resultService.postFetchResult(this.data.searchResult.examinationDetailId,this.subjectArray,this.data.user.userId).subscribe(t=>{if(this.autoFetchResult=t,this.autoFetchResult.length>0){this.newResult=!1;for(const t of this.autoFetchResult)for(const e of this.t.value)if(t.subjectId===e.subjectId){const i=this.t.value.findIndex((t,i)=>t.subjectId===e.subjectId);this.t.at(i).patchValue({marksObtained:t.marksObtained})}}})}onSubmit(){this.isSubmitting=!0,console.log(this.resultForm.value),this.newResult?this.resultService.postAddResult(this.resultForm.value,this.data.user.userId).subscribe(t=>{this.isSubmitting=!1,t.message&&this.closeDialog()}):this.resultService.postEditResult(this.resultForm.value,this.data.user.userId).subscribe(t=>{this.isSubmitting=!1,t.message&&this.closeDialog()})}closeDialog(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(o.a),c.Ob(o.d),c.Ob(l.j),c.Ob(s.e),c.Ob(l.e),c.Ob(l.g))},t.\u0275cmp=c.Ib({type:t,selectors:[["ng-component"]],decls:17,vars:4,consts:[[1,"header"],[1,"mat-headline"],[3,"click"],[1,"mat-subheading-2"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"diameter",4,"ngIf"],[3,"formGroup","ngSubmit"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary"],[3,"formGroup"],["appearance","standard"],["matInput","","formControlName","subjectName"],["appearance","standard",1,"ml-20","mr-20"],["matInput","","formControlName","marksObtained"],["matInput","","formControlName","outOf"],[3,"diameter"]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"p",1),c.Cc(2,"Result"),c.Tb(),c.Ub(3,"mat-icon",2),c.cc("click",function(){return e.closeDialog()}),c.Cc(4,"close"),c.Tb(),c.Tb(),c.Pb(5,"mat-divider"),c.Ub(6,"div",3),c.Ub(7,"p"),c.Ub(8,"b"),c.Cc(9,"Name"),c.Tb(),c.Cc(10),c.Tb(),c.Ub(11,"p"),c.Ub(12,"b"),c.Cc(13,"Email"),c.Tb(),c.Cc(14),c.Tb(),c.Tb(),c.Bc(15,g,4,3,"form",4),c.Bc(16,C,1,1,"mat-spinner",5)),2&t&&(c.Db(10),c.Ec(" : ",e.data.user.firstName+" "+e.data.user.middleName,""),c.Db(4),c.Ec(" : ",e.data.user.email,""),c.Db(1),c.lc("ngIf",!e.spinnerLoading),c.Db(1),c.lc("ngIf",e.spinnerLoading||e.isSubmitting))},directives:[u.a,d.a,a.k,s.u,s.o,s.g,a.j,b.a,m.b,m.e,h.b,s.c,s.n,s.f,f.b],styles:[".header[_ngcontent-%COMP%]{margin-bottom:10px;height:32px}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{float:left;width:80%;padding:0;margin:0}.header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:0;cursor:pointer}button[_ngcontent-%COMP%]{display:block;margin:0 auto}"]}),t})();var v=i("Dh3D"),O=i("+0xr"),D=i("d3UM"),I=i("FKr1");function S(t,e){if(1&t&&c.Pb(0,"mat-option",18),2&t){const t=e.$implicit;c.lc("value",t.id)("innerHTML",t.name,c.vc)}}function U(t,e){if(1&t&&c.Pb(0,"mat-option",18),2&t){const t=e.$implicit;c.lc("value",t.id)("innerHTML",t.examinationName,c.vc)}}function T(t,e){1&t&&(c.Ub(0,"th",19),c.Cc(1," Name "),c.Tb())}function P(t,e){if(1&t&&(c.Ub(0,"td",20),c.Cc(1),c.Tb()),2&t){const t=e.$implicit;c.Db(1),c.Ec(" ",t.firstName+" "+t.middleName," ")}}function w(t,e){1&t&&(c.Ub(0,"th",19),c.Cc(1," Email "),c.Tb())}function j(t,e){if(1&t){const t=c.Vb();c.Ub(0,"td",21),c.cc("click",function(){c.uc(t);const i=e.$implicit;return c.gc().openDialog(i)}),c.Cc(1),c.Tb()}if(2&t){const t=e.$implicit;c.Db(1),c.Ec(" ",t.email," ")}}function M(t,e){1&t&&c.Pb(0,"tr",22)}function R(t,e){1&t&&c.Pb(0,"tr",23)}const F=[{path:"",component:(()=>{class t{constructor(t,e,i,a,n,r){this.standardService=t,this.userService=e,this.examinationService=i,this.formbuilder=a,this.dialog=n,this.router=r,this.displayedColumns=["firstName","email"],this.resultPerPage=20,this.pageSizeOptions=[20,50,100],this.pageIndex=1,this.isLoading=!0,this.searchResult=this.formbuilder.group({standardId:["",[s.t.required]],examinationDetailId:["",[s.t.required]]})}ngOnInit(){this.standardService.getStandard().subscribe(t=>{this.standard=t})}getUser(t){this.userService.getUserBySId(this.resultPerPage,this.pageIndex,t).subscribe(t=>{this.user=t,this.dataSource=new O.k(t),this.dataSource.sort=this.sort})}getExamAndUserDetail(t){this.examinationService.getExaminationDetailBySId(t).subscribe(t=>{this.examinationDetail=t}),this.getUser(t)}openDialog(t){this.searchResult.invalid||this.dialog.open(x,{width:"fit-content ",data:{user:t,searchResult:this.searchResult.value}}).afterClosed().subscribe(t=>{})}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(l.h),c.Ob(l.j),c.Ob(l.c),c.Ob(s.e),c.Ob(o.b),c.Ob(r.b))},t.\u0275cmp=c.Ib({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&c.Gc(v.a,1),2&t){let t;c.rc(t=c.dc())&&(e.sort=t.first)}},decls:24,vars:6,consts:[[1,"container"],[1,"filter-div"],["appearance","standard",1,"filter-input"],["matInput","","placeholder","filterlist..."],[3,"formGroup"],["appearance","standard",1,"search-input"],["placeholder","Standard...","formControlName","standardId",3,"selectionChange"],[3,"value","innerHTML",4,"ngFor","ngForOf"],["placeholder","Examination...","formControlName","examinationDetailId"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","firstName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["mat-cell","",3,"click",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"value","innerHTML"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"div"),c.Ub(3,"mat-form-field",2),c.Ub(4,"mat-label"),c.Cc(5,"Filter"),c.Tb(),c.Pb(6,"input",3),c.Tb(),c.Ub(7,"form",4),c.Ub(8,"mat-form-field",5),c.Ub(9,"mat-select",6),c.cc("selectionChange",function(t){return e.getExamAndUserDetail(t.value)}),c.Bc(10,S,1,2,"mat-option",7),c.Tb(),c.Tb(),c.Ub(11,"mat-form-field",5),c.Ub(12,"mat-select",8),c.Bc(13,U,1,2,"mat-option",7),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(14,"div",9),c.Ub(15,"table",10),c.Sb(16,11),c.Bc(17,T,2,0,"th",12),c.Bc(18,P,2,1,"td",13),c.Rb(),c.Sb(19,14),c.Bc(20,w,2,0,"th",12),c.Bc(21,j,2,1,"td",15),c.Rb(),c.Bc(22,M,1,0,"tr",16),c.Bc(23,R,1,0,"tr",17),c.Tb(),c.Tb(),c.Tb()),2&t&&(c.Db(7),c.lc("formGroup",e.searchResult),c.Db(3),c.lc("ngForOf",e.standard),c.Db(3),c.lc("ngForOf",e.examinationDetail),c.Db(2),c.lc("dataSource",e.dataSource),c.Db(7),c.lc("matHeaderRowDef",e.displayedColumns),c.Db(1),c.lc("matRowDefColumns",e.displayedColumns))},directives:[m.b,m.e,h.b,s.u,s.o,s.g,D.a,s.n,s.f,a.j,O.j,v.a,O.c,O.e,O.b,O.g,O.i,I.n,O.d,v.b,O.a,O.f,O.h],styles:[".filter-div[_ngcontent-%COMP%]{width:100%;height:80px;display:inline-block;padding:5px 0;border-radius:20px 20px 0 0;background-color:#a2d6f91a;box-shadow:0 5px 5px -3px #0000001a,0 8px 10px 1px #00000012,0 3px 14px 2px #0000000f}.filter-div[_ngcontent-%COMP%]   .filter-input[_ngcontent-%COMP%]{margin-left:20px;float:left;max-width:300px}.filter-div[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{margin-left:20px;float:left;max-width:125px}.container[_ngcontent-%COMP%]{width:95%;margin:50px auto 100px}.container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.container[_ngcontent-%COMP%]   .user-exist[_ngcontent-%COMP%]{color:#000;cursor:pointer;text-decoration:underline;-webkit-text-decoration-color:grey;text-decoration-color:grey}.container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:50%;text-align:center}"]}),t})()},{path:":userId",component:x}];let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({imports:[[r.f.forChild(F)],r.f]}),t})(),y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({providers:[],imports:[[a.c,k,n.a]]}),t})()}}]);